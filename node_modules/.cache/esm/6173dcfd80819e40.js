let express,join,dirname,fileURLToPath,morgan,connectToDb,cors,auth,api,session,http,setupSocketIO;_808‍.w("express",[["default",["express"],function(v){express=v}]]);_808‍.w("path",[["join",["join"],function(v){join=v}],["dirname",["dirname"],function(v){dirname=v}]]);_808‍.w("url",[["fileURLToPath",["fileURLToPath"],function(v){fileURLToPath=v}]]);_808‍.w("morgan",[["default",["morgan"],function(v){morgan=v}]]);_808‍.w("./db",[["default",["connectToDb"],function(v){connectToDb=v}]]);_808‍.w("cors",[["default",["cors"],function(v){cors=v}]]);_808‍.w("./routes/auth",[["default",["auth"],function(v){auth=v}]]);_808‍.w("./routes/api",[["default",["api"],function(v){api=v}]]);_808‍.w("./session",[["default",["session"],function(v){session=v}]]);_808‍.w("http",[["default",["http"],function(v){http=v}]]);_808‍.w("./socket/textSocket",[["default",["setupSocketIO"],function(v){setupSocketIO=v}]]);














const app = express();
const server = http.createServer(app);

const __dirname = dirname(fileURLToPath(_808‍._.meta.url));
app.use(cors({
  // React uygulamanızın kökeni
  credentials: true, // Çerez gönderip almak için
}))

/* app.use('/assets', express.static(join(__dirname, 'public')));
app.use(express.static(join(__dirname, 'public', 'client'))); */
app.use(express.urlencoded({ extended: false }));
app.use(morgan(":method - :url - :date - :response-time ms"));
app.use(express.json());
app.use("/", session(app));

/* app.use('/404', (req, res) => {
    res.render('pageİsNotFound');
})
 */

app.use("/", auth);
app.use("/", api);



Promise.all([connectToDb()])
  .then(() =>
    server.listen(process.env.PORT || 3000, () => {console.log("SickCord Online")
    setupSocketIO(server);
    /* await redisClient.connect(); */
   }
)
  )
  .catch((error) => {
    console.error(`MongoDB Atlas Error: ${error}`);
    process.exit();
  });