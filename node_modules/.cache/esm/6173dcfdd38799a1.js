let express,join,dirname,fileURLToPath,morgan,connectToDb,multer,cors,auth,api,session,http,setupSocketIO,Server;_d38‍.w("express",[["default",["express"],function(v){express=v}]]);_d38‍.w("path",[["join",["join"],function(v){join=v}],["dirname",["dirname"],function(v){dirname=v}]]);_d38‍.w("url",[["fileURLToPath",["fileURLToPath"],function(v){fileURLToPath=v}]]);_d38‍.w("morgan",[["default",["morgan"],function(v){morgan=v}]]);_d38‍.w("./db",[["default",["connectToDb"],function(v){connectToDb=v}]]);_d38‍.w("multer",[["default",["multer"],function(v){multer=v}]]);_d38‍.w("cors",[["default",["cors"],function(v){cors=v}]]);_d38‍.w("./routes/auth",[["default",["auth"],function(v){auth=v}]]);_d38‍.w("./routes/api",[["default",["api"],function(v){api=v}]]);_d38‍.w("./session",[["default",["session"],function(v){session=v}]]);_d38‍.w("http",[["default",["http"],function(v){http=v}]]);_d38‍.w("./socket/textSocket",[["default",["setupSocketIO"],function(v){setupSocketIO=v}]]);_d38‍.w("socket.io",[["Server",["Server"],function(v){Server=v}]]);
















const app = express();
const server = http.createServer(app);

const __dirname = dirname(fileURLToPath(_d38‍._.meta.url));
app.use(cors({
  origin: 'http://localhost:3001', // React uygulamanızın kökeni
  credentials: true, // Çerez gönderip almak için
}))

app.use('/assets', express.static(join(__dirname, 'public')));
app.use(express.static(join(__dirname, 'public', 'client')));
app.use(express.urlencoded({ extended: false }));
app.use(morgan(":method - :url - :date - :response-time ms"));
app.use(express.json());
app.use("/", session(app));
app.set('view engine', 'pug');
/* app.use('/404', (req, res) => {
    res.render('pageİsNotFound');
})
 */

app.use("/", auth);
app.use("/", api);



Promise.all([connectToDb()])
  .then(() =>
    server.listen(3000, () => {console.log("SickCord Online")
    setupSocketIO(server);}
)
  )
  .catch((error) => {
    console.error(`MongoDB Atlas Error: ${error}`);
    process.exit();
  });