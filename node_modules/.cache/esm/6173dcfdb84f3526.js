let express,join,dirname,fileURLToPath,morgan,connectToDb,multer,cors,auth,api,session;_b84‍.w("express",[["default",["express"],function(v){express=v}]]);_b84‍.w("path",[["join",["join"],function(v){join=v}],["dirname",["dirname"],function(v){dirname=v}]]);_b84‍.w("url",[["fileURLToPath",["fileURLToPath"],function(v){fileURLToPath=v}]]);_b84‍.w("morgan",[["default",["morgan"],function(v){morgan=v}]]);_b84‍.w("./db",[["default",["connectToDb"],function(v){connectToDb=v}]]);_b84‍.w("multer",[["default",["multer"],function(v){multer=v}]]);_b84‍.w("cors",[["default",["cors"],function(v){cors=v}]]);_b84‍.w("./routes/auth",[["default",["auth"],function(v){auth=v}]]);_b84‍.w("./routes/api",[["default",["api"],function(v){api=v}]]);_b84‍.w("./session",[["default",["session"],function(v){session=v}]]);


//import admin from "./routes/admin"
//import session from './session';










const app = express();
const __dirname = dirname(fileURLToPath(_b84‍._.meta.url));
//const logFile = join(__dirname, 'blogchef.log');

//app.use(upload.single('image'));

app.use(cors({
  origin: 'http://localhost:3001', // React uygulamanızın kökeni
  credentials: true, // Çerez gönderip almak için
}))

app.use('/assets', express.static(join(__dirname, 'public')));
app.use(express.static(join(__dirname, 'public', 'client')));
app.use(express.urlencoded({ extended: false }));
app.use(morgan(":method - :url - :date - :response-time ms"));
app.use(express.json());
app.use("/", session(app));
app.set('view engine', 'pug');
/* app.use('/404', (req, res) => {
    res.render('pageİsNotFound');
})
 */

app.use("/", auth);
app.use("/", api);



Promise.all([connectToDb()])
  .then(() =>
    app.listen(3000, () => console.log("SickCord Online"))
  )
  .catch((error) => {
    console.error(`MongoDB Atlas Error: ${error}`);
    process.exit();
  });