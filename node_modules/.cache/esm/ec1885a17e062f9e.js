let getUser,updateUser;_7e0‍.x([["default",()=>_7e0‍.o]]);_7e0‍.w("../../../controller/user",[["getUser",["getUser"],function(v){getUser=v}],["updateUser",["updateUser"],function(v){updateUser=v}]]);

const respondInvitation = async (req, res) => {
  try {
    const { id } = req.params;
    const { accept, type, name } = req.body;

    const user = await getUser(req.session.user.name);

    await updateUser(user._id, {
      $pull: {
        invitations: { _id: id },
      },
    });

    if (accept) {
      const friend = await getUser(name);

      await updateUser(user._id, {
        $push: {
          friends: friend._id,
        },
      });

      await updateUser(friend._id, {
        $push: {
          friends: user._id,
        },
      });
    }

    _7e0‍.g.console.log("RespondInvitation", id, accept, type, name);
    
    res.status(200).json({ message: 'Invitation responded successfully' });
    return Promise.resolve();
  } catch (error) {
    _7e0‍.g.console.log("error on the request", error);
    res.status(500).json({ code: error });
  }
};

_7e0‍.d(respondInvitation);
